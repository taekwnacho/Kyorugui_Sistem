<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Contador de puntos Goldenteam</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f0f2f5;
      color: #333;
      text-align: center;
      padding: 10px;
      position: relative;
    }

    .title-container {
      margin-bottom: 20px;
      padding: 5px;
    }
    
    h1 {
      margin: 0;
      font-size: 2.5em;
      color: #004d40;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    
    h2.subtitle {
      margin: 0;
      font-size: 1.8em;
      color: #00796b;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .scoreboard {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }

    .player {
      background-color: white;
      padding: 20px 15px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      width: 200px;
      transition: transform 0.3s ease-in-out;
    }

    .player:hover {
      transform: translateY(-3px);
    }

    .red { border-top: 5px solid #d32f2f; }
    .blue { border-top: 5px solid #1976d2; }

    .player-name-container {
        margin-bottom: 10px;
    }

    .player-name-input {
        width: 90%;
        padding: 6px;
        font-size: 14px;
    }

    .player-name {
        font-size: 22px;
        margin: 8px 0;
    }

    .score {
      font-size: 48px;
      margin: 10px 0;
    }

    .penalty-section {
      font-size: 16px;
      margin-bottom: 15px;
    }

    .buttons {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
      margin-top: 15px;
    }

    button {
      padding: 12px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      color: white;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }

    .button-container {
      position: relative;
    }

    .button-counter {
      position: absolute;
      top: 3px;
      right: 3px;
      background-color: rgba(0, 0, 0, 0.4);
      color: white;
      font-size: 10px;
      padding: 2px 5px;
      border-radius: 5px;
      font-weight: bold;
    }

    .h-spin { background-color: #5cb85c; }
    .body { background-color: #28a745; }
    .head { background-color: #17a2b8; }
    .b-spin { background-color: #dc3545; }
    .punch { background-color: #6c757d; }
    .penalty-button { background-color: #ffc107; color: black; }
    .reset {
      margin-top: 30px;
      background-color: #555;
      color: white;
      padding: 12px 30px;
      border-radius: 8px;
      font-size: 18px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .reset:hover {
        background-color: #333;
    }

    .rounds {
      margin-top: 40px;
      background-color: #e9ecef;
      padding: 20px;
      border-radius: 10px;
      width: 400px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .round-count {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #34495e;
    }

    .round-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .timer {
      font-size: 32px;
      font-weight: bold;
      margin-top: 20px;
      color: #2c3e50;
      letter-spacing: 2px;
    }

    .timer-controls {
      margin-top: 10px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .start { background-color: #2196f3; }
    .pause { background-color: #ffa000; }
    .restart { background-color: #9c27b0; }
    .winner-banner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #1976d2;
      color: white;
      padding: 20px 40px;
      border-radius: 15px;
      font-size: 2.5em;
      font-weight: bold;
      z-index: 1000;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      display: none; /* Inicialmente oculto */
    }
  </style>
</head>
<body>
  <div class="title-container">
    <h1>Contador de puntos</h1>
    <h2 class="subtitle">Goldenteam</h2>
  </div>

  <div class="scoreboard">
    <div class="player blue">
      <div class="player-name-container">
        <input type="text" id="name-input-blue" class="player-name-input" placeholder="Nombre Jugador Azul" oninput="updatePlayerName('blue', this.value)">
        <p id="player-name-blue" class="player-name">Jugador Azul</p>
      </div>
      <div id="score-blue" class="score">0</div>
      <div class="penalty-section">
        Penalizaciones: <span id="penalty-blue">0</span>
      </div>
      <div class="buttons">
        <div class="button-container">
          <button class="h-spin" onclick="changeScore('blue', 5, 'h-spin')">H-spin</button>
          <span id="h-spin-count-blue" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="b-spin" onclick="changeScore('blue', 4, 'b-spin')">B-spin</button>
          <span id="b-spin-count-blue" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="head" onclick="changeScore('blue', 3, 'head')">Head</button>
          <span id="head-count-blue" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="body" onclick="changeScore('blue', 2, 'body')">Body</button>
          <span id="body-count-blue" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="punch" onclick="changeScore('blue', 1, 'punch')">Punch</button>
          <span id="punch-count-blue" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="penalty-button" onclick="addPenalty('blue')">G</button>
          <span id="penalty-count-blue" class="button-counter">0</span>
        </div>
      </div>
    </div>
    
    <div class="player red">
      <div class="player-name-container">
        <input type="text" id="name-input-red" class="player-name-input" placeholder="Nombre Jugador Rojo" oninput="updatePlayerName('red', this.value)">
        <p id="player-name-red" class="player-name">Jugador Rojo</p>
      </div>
      <div id="score-red" class="score">0</div>
      <div class="penalty-section">
        Penalizaciones: <span id="penalty-red">0</span>
      </div>
      <div class="buttons">
        <div class="button-container">
          <button class="h-spin" onclick="changeScore('red', 5, 'h-spin')">H-spin</button>
          <span id="h-spin-count-red" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="b-spin" onclick="changeScore('red', 4, 'b-spin')">B-spin</button>
          <span id="b-spin-count-red" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="head" onclick="changeScore('red', 3, 'head')">Head</button>
          <span id="head-count-red" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="body" onclick="changeScore('red', 2, 'body')">Body</button>
          <span id="body-count-red" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="punch" onclick="changeScore('red', 1, 'punch')">Punch</button>
          <span id="punch-count-red" class="button-counter">0</span>
        </div>
        <div class="button-container">
          <button class="penalty-button" onclick="addPenalty('red')">G</button>
          <span id="penalty-count-red" class="button-counter">0</span>
        </div>
      </div>
    </div>
  </div>

  <div class="rounds">
    <div class="round-count">
      Rounds ganados<br>
      Azul: <span id="rounds-blue">0</span> | Rojo: <span id="rounds-red">0</span>
    </div>
    <div class="round-buttons">
      <div>
        <button class="add" onclick="changeRound('blue', 1)">+1 Azul</button>
        <button class="subtract" onclick="changeRound('blue', -1)">-1 Azul</button>
      </div>
      <div>
        <button class="add" onclick="changeRound('red', 1)">+1 Rojo</button>
        <button class="subtract" onclick="changeRound('red', -1)">-1 Rojo</button>
      </div>
    </div>

    <div class="timer">
      Tiempo: <span id="timer">01:30</span>
    </div>

    <div class="timer-controls">
      <button class="start" onclick="startTimer()">Iniciar</button>
      <button class="pause" onclick="pauseTimer()">Pausar</button>
      <button class="restart" onclick="restartTimer()">Reiniciar Tiempo</button>
    </div>
  </div>

  <button class="reset" onclick="resetAll()">Reiniciar Todo</button>
  <div id="winner-banner" class="winner-banner"></div>

  <script>
    let scores = { red: 0, blue: 0 };
    let rounds = { red: 0, blue: 0 };
    let penalties = { red: 0, blue: 0 };
    let buttonCounts = {
        red: { 'h-spin': 0, 'body': 0, 'head': 0, 'b-spin': 0, 'punch': 0 },
        blue: { 'h-spin': 0, 'body': 0, 'head': 0, 'b-spin': 0, 'punch': 0 }
    };
    let timer;
    let duration = 90;
    let timeLeft = duration;
    let isTimerRunning = false;

    function updatePlayerName(player, name) {
        document.getElementById(`player-name-${player}`).textContent = name || (player === 'red' ? 'Jugador Rojo' : 'Jugador Azul');
    }

    function changeScore(player, amount, buttonType) {
      if (!isTimerRunning) {
        alert("El tiempo debe estar corriendo para modificar los puntos.");
        return;
      }
      scores[player] += amount;
      if (scores[player] < 0) scores[player] = 0;
      document.getElementById(`score-${player}`).textContent = scores[player];
      
      if (buttonType) {
        buttonCounts[player][buttonType]++;
        document.getElementById(`${buttonType}-count-${player}`).textContent = buttonCounts[player][buttonType];
      }

      checkPointDifference();
    }

    function addPenalty(player) {
        if (!isTimerRunning) {
            alert("El tiempo debe estar corriendo para agregar una penalización.");
            return;
        }
        const opponent = player === 'red' ? 'blue' : 'red';
        penalties[player]++;
        scores[opponent]++;
        document.getElementById(`penalty-${player}`).textContent = penalties[player];
        document.getElementById(`score-${opponent}`).textContent = scores[opponent];
        
        document.getElementById(`penalty-count-${player}`).textContent = penalties[player];

        if (penalties[player] >= 5) {
          rounds[opponent]++;
          alert(`¡${player.toUpperCase()} ha acumulado 5 penalizaciones! Round para ${opponent.toUpperCase()}`);
          updateDisplay();
          resetScores();
          stopTimer();
        } else {
          checkPointDifference();
        }
    }

    function changeRound(player, amount) {
      rounds[player] += amount;
      if (rounds[player] < 0) rounds[player] = 0;
      document.getElementById(`rounds-${player}`).textContent = rounds[player];
      
      checkWinner();
    }

    function checkPointDifference() {
      const diff = Math.abs(scores.red - scores.blue);
      if (diff >= 14) {
        const winner = scores.red > scores.blue ? "red" : "blue";
        rounds[winner]++;
        alert(`¡Diferencia de 14 puntos! Round para ${winner.toUpperCase()}`);
        updateDisplay();
        resetScores();
        stopTimer();
        checkWinner();
      }
    }

    function checkWinner() {
        const winnerBanner = document.getElementById('winner-banner');
        if (rounds.blue >= 2) {
            const bluePlayerName = document.getElementById('name-input-blue').value || 'Jugador Azul';
            winnerBanner.textContent = `¡Ganador ${bluePlayerName}!`;
            winnerBanner.style.display = 'block';
            winnerBanner.style.backgroundColor = '#1976d2';
            stopTimer();
        } else if (rounds.red >= 2) {
            const redPlayerName = document.getElementById('name-input-red').value || 'Jugador Rojo';
            winnerBanner.textContent = `¡Ganador ${redPlayerName}!`;
            winnerBanner.style.display = 'block';
            winnerBanner.style.backgroundColor = '#d32f2f';
            stopTimer();
        } else {
            winnerBanner.style.display = 'none';
        }
    }

    function updateDisplay() {
      document.getElementById("score-red").textContent = scores.red;
      document.getElementById("score-blue").textContent = scores.blue;
      document.getElementById("rounds-red").textContent = rounds.red;
      document.getElementById("rounds-blue").textContent = rounds.blue;
      document.getElementById("penalty-red").textContent = penalties.red;
      document.getElementById("penalty-blue").textContent = penalties.blue;
      
      document.getElementById("h-spin-count-red").textContent = buttonCounts.red['h-spin'];
      document.getElementById("body-count-red").textContent = buttonCounts.red['body'];
      document.getElementById("head-count-red").textContent = buttonCounts.red['head'];
      document.getElementById("b-spin-count-red").textContent = buttonCounts.red['b-spin'];
      document.getElementById("punch-count-red").textContent = buttonCounts.red['punch'];
      document.getElementById("h-spin-count-blue").textContent = buttonCounts.blue['h-spin'];
      document.getElementById("body-count-blue").textContent = buttonCounts.blue['body'];
      document.getElementById("head-count-blue").textContent = buttonCounts.blue['head'];
      document.getElementById("b-spin-count-blue").textContent = buttonCounts.blue['b-spin'];
      document.getElementById("punch-count-blue").textContent = buttonCounts.blue['punch'];
      document.getElementById("penalty-count-red").textContent = penalties.red;
      document.getElementById("penalty-count-blue").textContent = penalties.blue;
    }

    function resetScores() {
      scores.red = 0;
      scores.blue = 0;
      penalties.red = 0;
      penalties.blue = 0;
      buttonCounts.red = { 'h-spin': 0, 'body': 0, 'head': 0, 'b-spin': 0, 'punch': 0 };
      buttonCounts.blue = { 'h-spin': 0, 'body': 0, 'head': 0, 'b-spin': 0, 'punch': 0 };
      updateDisplay();
    }

    function resetAll() {
      resetScores();
      rounds.red = 0;
      rounds.blue = 0;
      timeLeft = duration;
      document.getElementById("rounds-red").textContent = 0;
      document.getElementById("rounds-blue").textContent = 0;
      document.getElementById("timer").textContent = formatTime(duration);
      stopTimer();

      const existingBanner = document.getElementById('winner-banner');
      if (existingBanner) {
        existingBanner.style.display = 'none';
      }
      document.getElementById("name-input-red").value = "";
      document.getElementById("player-name-red").textContent = "Jugador Rojo";
      document.getElementById("name-input-blue").value = "";
      document.getElementById("player-name-blue").textContent = "Jugador Azul";
    }

    function startTimer() {
      if (isTimerRunning) return;
      isTimerRunning = true;
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").textContent = formatTime(timeLeft);
        if (timeLeft <= 0) {
          clearInterval(timer);
          isTimerRunning = false;
          endRoundByTime();
        }
      }, 1000);
    }

    function pauseTimer() {
      clearInterval(timer);
      isTimerRunning = false;
    }

    function restartTimer() {
      pauseTimer();
      timeLeft = duration;
      document.getElementById("timer").textContent = formatTime(duration);
      resetScores();
    }

    function stopTimer() {
      clearInterval(timer);
      isTimerRunning = false;
    }

    function endRoundByTime() {
      if (scores.red > scores.blue) {
        rounds.red++;
        alert("¡Tiempo terminado! Round para ROJO");
      } else if (scores.blue > scores.red) {
        rounds.blue++;
        alert("¡Tiempo terminado! Round para AZUL");
      } else {
        if (buttonCounts.red['h-spin'] > buttonCounts.blue['h-spin']) {
          rounds.red++;
          alert("¡Tiempo terminado, empate en puntos! Round para ROJO por más H-spin.");
        } else if (buttonCounts.blue['h-spin'] > buttonCounts.red['h-spin']) {
          rounds.blue++;
          alert("¡Tiempo terminado, empate en puntos! Round para AZUL por más H-spin.");
        } else {
          if (buttonCounts.red['b-spin'] > buttonCounts.blue['b-spin']) {
            rounds.red++;
            alert("¡Empate en puntos y H-spin! Round para ROJO por más B-spin.");
          } else if (buttonCounts.blue['b-spin'] > buttonCounts.red['b-spin']) {
            rounds.blue++;
            alert("¡Empate en puntos y H-spin! Round para AZUL por más B-spin.");
          } else {
            if (buttonCounts.red['head'] > buttonCounts.blue['head']) {
              rounds.red++;
              alert("¡Empate en puntos, H-spin y B-spin! Round para ROJO por más Head.");
            } else if (buttonCounts.blue['head'] > buttonCounts.red['head']) {
              rounds.blue++;
              alert("¡Empate en puntos, H-spin y B-spin! Round para AZUL por más Head.");
            } else {
              alert("¡Tiempo terminado! Empate en este round.");
            }
          }
        }
      }
      updateDisplay();
      resetScores();
      checkWinner();
    }

    function formatTime(seconds) {
      const min = Math.floor(seconds / 60).toString().padStart(2, '0');
      const sec = (seconds % 60).toString().padStart(2, '0');
      return `${min}:${sec}`;
    }
  </script>
</body>
          </html>
